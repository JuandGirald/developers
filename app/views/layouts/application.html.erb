<!DOCTYPE html>
<html>
<head>
  <title>Develpers</title>

  <script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
  <script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>
<body>

<%= yield %>

<script>
  function gmap_show(developer) {
    // if ((developer.latitude == null) || (developer.longitude == null) ) {    // validation check if coordinates are there
    //   return 0;
    // }

    handler = Gmaps.build('Google');    // map init
    handler.buildMap({ provider: {}, internal: {id: 'multi_markers'}}, function(){
      var json_array = []
      for (i = 0, len = developer.length; i < 1000; ++i) {
        
        json_array.push(    // put marker method
          {
            "lat": developer[i].latitude,    // coordinates from parameter developer
            "lng": developer[i].longitude,
            "infowindow": "<b>" + developer[i].name + "</b> , " + developer[i].location
          }
        );
      }
      var markers = handler.addMarkers(json_array);

      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();
      handler.getMap().setZoom(2);    // set the default zoom of the map
    });
  }
</script>
</body>
</html>
